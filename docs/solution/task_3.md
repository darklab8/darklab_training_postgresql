# Task # 3
## Requirements
Задание 3

(Обязательно к выполнению)

Написать следующие запросы к БД:

1. Посчитать количество постов для пользователя с заданным ID;

2. Выбрать N опубликованных постов, отсортированных в порядке убывания даты создания;
3. Выбрать N постов в статусе "ожидает публикации", отсортированных в порядке возрастания даты создания;
4. Найти N недавно обновленных постов определенного тэга для K страницы (в каждой странице L постов).
5. Найти N постов с наибольшим рейтингом за день/месяц/год.

6. Оценить время выполнения запросов (на достаточном количестве тестовых данных) и проанализировать план выполнения запросов.
7. Сократить время на выполнение запросов, используя подходящие индексы. Сравнить время выполнения и план запросов после создания индексов.
8. Оценить размер используемых индексов. При возможности - сократить размер созданных индексов.

## Solution

## 1. Посчитать количество постов для пользователя с заданным ID;

```sql
--8<-- "sql/task3/queries/query3_1.sql"
```

```go
--8<-- "golang/task3_1_test.go"
```

## 2. Выбрать N опубликованных постов, отсортированных в порядке убывания даты создания;

```sql
--8<-- "sql/task3/queries/query3_2.sql"
```

```go
--8<-- "golang/task3_2_test.go"
```

## 3. Выбрать N постов в статусе "ожидает публикации", отсортированных в порядке возрастания даты создания;

```sql
--8<-- "sql/task3/queries/query3_3.sql"
```

```go
--8<-- "golang/task3_3_test.go"
```

## 4. Найти N недавно обновленных постов определенного тэга для K страницы (в каждой странице L постов).

```sql
--8<-- "sql/task3/queries/query3_4.sql"
```

```go
--8<-- "golang/task3_4_test.go"
```

## 5. Найти N постов с наибольшим рейтингом за день/месяц/год.

```sql
--8<-- "sql/task3/queries/query3_5.sql"
```

```go
--8<-- "golang/task3_5_test.go"
```

`6.` Оценить время выполнения запросов (на достаточном количестве тестовых данных) и проанализировать план выполнения запросов.

Выполним вместе с 7м пунктом

`7.` Сократить время на выполнение запросов, используя подходящие индексы. Сравнить время выполнения и план запросов после создания индексов.

Выполним вместе с 8 пунктом

`8.` Оценить размер используемых индексов. При возможности - сократить размер созданных индексов.
