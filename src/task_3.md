# Task # 3
## Requirements
Задание 3

(Обязательно к выполнению)

Написать следующие запросы к БД:

1. Посчитать количество постов для пользователя с заданным ID;

2. Выбрать N опубликованных постов, отсортированных в порядке убывания даты создания;
3. Выбрать N постов в статусе "ожидает публикации", отсортированных в порядке возрастания даты создания;
4. Найти N недавно обновленных постов определенного тэга для K страницы (в каждой странице L постов).
5. Найти N постов с наибольшим рейтингом за день/месяц/год.

6. Оценить время выполнения запросов (на достаточном количестве тестовых данных) и проанализировать план выполнения запросов.
7. Сократить время на выполнение запросов, используя подходящие индексы. Сравнить время выполнения и план запросов после создания индексов.
8. Оценить размер используемых индексов. При возможности - сократить размер созданных индексов.

## Solution

1. Посчитать количество постов для пользователя с заданным ID;

```sql
--8<-- "src/task3/queries/query3_1.sql"
```

2. Выбрать N опубликованных постов, отсортированных в порядке убывания даты создания;

```sql
--8<-- "src/task3/queries/query3_2.sql"
```

3. Выбрать N постов в статусе "ожидает публикации", отсортированных в порядке возрастания даты создания;

```sql
--8<-- "src/task3/queries/query3_3.sql"
```

4. Найти N недавно обновленных постов определенного тэга для K страницы (в каждой странице L постов).

```sql
--8<-- "src/task3/queries/query3_4.sql"
```

5. Найти N постов с наибольшим рейтингом за день/месяц/год.

```sql
--8<-- "src/task3/queries/query3_5.sql"
```

6. Оценить время выполнения запросов (на достаточном количестве тестовых данных) и проанализировать план выполнения запросов.
7. Сократить время на выполнение запросов, используя подходящие индексы. Сравнить время выполнения и план запросов после создания индексов.
8. Оценить размер используемых индексов. При возможности - сократить размер созданных индексов.